<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mensajes de un Planeta Extraño</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Orbitron&display=swap" rel="stylesheet">

</head>
<body>
    <!-- Pantalla de Introducción -->
    <div id="pantalla-inicio" class="pantalla visible">
        <h1>Bienvenida a un Planeta Extraño</h1>
        <p>Abres los ojos lentamente, todavía aturdida por el largo viaje. La luz roja del sistema de emergencia parpadea dentro de la cabina de tu nave. Algo ha salido mal.<br><br>
        Al mirar por la escotilla, el paisaje exterior te deja sin aliento: un planeta desconocido, extraño y desolado, que no debería estar en tu ruta. Una sensación inquietante recorre tu cuerpo. Algo aquí está esperándote.<br><br>
        Es hora de salir y descubrir qué secretos guarda este lugar.</p>
        <div class="botones-centro">
            <button onclick="avanzarPantalla()">Comenzar la Aventura</button>
        </div>
    </div>

    <!-- Primer Mensaje Holográfico en el Desierto Luminoso -->
    <div id="pantalla-frase1" class="pantalla">
        <h2>Desierto Luminoso</h2>
        <p>
            Parece que estás en una especie de desierto…<br><br>
            De repente, escuchas un sonido extraño, aunque sorprendentemente agradable.<br><br>
            “Dios mío, ¡qué cosa tan mona!” piensas, mientras aparece frente a ti una pequeña criatura muy parecida a los gatos de tu planeta. Al principio, das un paso atrás, cautelosa... pero parece inofensiva.<br><br>
            Observas que la criatura se comunica de una forma peculiar, emitiendo sonidos y gestos incomprensibles. Entonces, te das cuenta de que… ¡te está retando! Parece que quiere jugar contigo, a un juego que te resulta vagamente familiar…<br><br>
            No parece dispuesta a dejarte avanzar hasta que aceptes su propuesta… ¡y consigas ganarle!
        </p>
        <div class="botones-reto">
            <button onclick="aceptarReto()">Acepto el reto</button>
            <button onclick="mostrarPopupCagueta()" class="gallina-boton">
                <span class="gallina-texto">Soy una gallina</span>
                <img src="assets/images/chicken.gif" alt="Gallina" class="gallina-icono">
            </button>
        </div>
    </div>

    <!-- Pantalla del Tic Tac Toe (Tres en Raya) -->
    <div id="pantalla-tic-tac-toe" class="pantalla">
        <h2>Desafío del Tres en Raya</h2>
        <p>Gana el juego para que la criatura te deje avanzar en tu aventura.</p>
        <div id="tres-en-raya">
            <div class="celda" onclick="jugadaHumana(0)"></div>
            <div class="celda" onclick="jugadaHumana(1)"></div>
            <div class="celda" onclick="jugadaHumana(2)"></div>
            <div class="celda" onclick="jugadaHumana(3)"></div>
            <div class="celda" onclick="jugadaHumana(4)"></div>
            <div class="celda" onclick="jugadaHumana(5)"></div>
            <div class="celda" onclick="jugadaHumana(6)"></div>
            <div class="celda" onclick="jugadaHumana(7)"></div>
            <div class="celda" onclick="jugadaHumana(8)"></div>
        </div>
        <div class="botones-centro">
            <button id="explorar-btn" onclick="avanzarPantalla()" disabled title="El alien te impide continuar hasta que le ganes.">Explorar más allá</button>
        </div>
    </div>

    <!-- Pantalla después de ganar al alien - Estructura misteriosa -->
    <div id="pantalla-estructura" class="pantalla">
        <h2>Una Estructura Misteriosa</h2>
        <p>
            Después de ganarle al pequeño alien, das un suspiro de alivio y decides seguir adelante sin mirar atrás. 
            Al avanzar, te encuentras un lugar extraño y fascinante. Delante de ti se alza una estructura gigantesca, imponente y antigua. 
            Parece tallada en la roca misma, con líneas suaves pero majestuosas, y un aura de misterio que se siente casi palpable.
            Las paredes están cubiertas de intrincados grabados y arcos que parecen conducir hacia un interior lleno de secretos. 
            Sus columnas se elevan hacia el cielo, creando una sensación de eternidad. La entrada es amplia, con una puerta abierta que te invita a explorar más allá.
        </p>
        <div class="botones-reto">
            <button onclick="entrarPantallaTrampas()">Entrar a la estructura</button>
            <button onclick="retrocederPantalla()">Huir como una cobarde</button>
        </div>
    </div>

    <!-- Pantalla del juego de esquivar rocas -->
    <div id="pantalla-trampas" class="pantalla">
        <h2>Esquiva las rocas</h2>
        <p>¡Cuidado! Parece que la estructura es inestable. Usa las flechas para moverte y esquivar las rocas.</p>
        <canvas id="juegoCanvas" width="600" height="400"></canvas>
        <div class="botones-centro">
            <button id="continuar-btn" onclick="avanzarPantalla()" disabled>Adentrarte</button>
        </div>
    </div>

    <!-- Popup de derrota -->
    <div id="popup-derrota" class="popup">
        <span class="cerrar-popup" onclick="cerrarPopupDerrota()">&times;</span>
        <div class="popup-contenido">
            <p>Has muerto ☠️☠️ </p>
            <p>Pero, por suerte, es un juego 😄</p>
        </div>
    </div>

        <!-- Popup de felicitación al esquivar las rocas -->
        <div id="popup-enhorabuena" class="popup">
            <span class="cerrar-popup" onclick="cerrarPopupEnhorabuena()">&times;</span>
            <div class="popup-contenido">
                <p>¡Enhorabuena, has conseguido sortear las rocas!</p>
                <img src="assets/images/girar.PNG" alt="Felicidades" class="imagen-giratoria">
            </div>
        </div>

    <!-- Pantalla de la Pared con el Mensaje Cifrado -->
    <div id="pantalla-mensaje-cifrado" class="pantalla">
        <h2>Pared Antigua</h2>
        <p>
            Te acercas a una pared cubierta de símbolos extraños y grabados antiguos. Entre los grabados, notas algo que parece un mensaje cifrado. La curiosidad te invade, y sientes que ese mensaje guarda algo importante.
        </p>
        <p class="texto-cifrado">✶ ∇ ⌖ ☰ ⍟ ⌬   ⍣   ☽⌖⧫☿✧   ☍⍣   ⊛⍂☾☌</p>
        <div class="botones-centro">
            <button onclick="intentarDescifrar()">Intentar descifrar</button>
        </div>
    </div>

        <!-- Pantalla del Juego de Ahorcado -->
    <!-- Pantalla del Juego de Ahorcado -->
    <div id="pantalla-ahorcado" class="pantalla">
        <h2>Juego de Ahorcado</h2>
        <p>Adivina la frase oculta:</p>
        <p id="frase-oculta">_ _ _ _ _   _ _   _ _ _ _ _   _ _ _ _   _ _ _ _ _ _ _</p>
        <div id="letras-intentadas">Letras intentadas: <span id="letras-intentadas-lista"></span></div>
        <div id="ahorcado-intentos">Intentos restantes: <span id="intentos-restantes">6</span></div>
        <div class="botones-centro">
            <input type="text" id="letra-input" maxlength="1" title="Introduce una letra para adivinar la frase">
            <button onclick="intentarLetra()">Intentar letra</button>
        </div>
        <!-- Botón que se desbloquea al adivinar la frase -->
        <div class="botones-centro">
            <button id="boton-continuar-ahorcado" onclick="avanzarPantalla()" disabled>Continuar por el pasadizo secreto</button>
        </div>
        <!-- Nuevo contenedor para los símbolos y la frase final -->
        <div id="animacion-frase" class="animacion-frase">
            <p id="frase-simbolos" class="frase-simbolos">✶ ∇ ⌖ ☰ ⍟ ⌬   ⍣   ☽⌖⧫☿✧   ☍⍣   ⊛⍂☾☌</p>
            <p id="frase-final" class="mensaje-descifrado"></p>
        </div>
    </div>


    <!-- Pantalla del Pasadizo Secreto -->
    <div id="pantalla-pasadizo" class="pantalla">
        <h2>El Pasadizo Secreto</h2>
        <p>
            Al descifrar el mensaje, un mecanismo oculto se activa y una puerta secreta se abre ante ti. Con cautela, avanzas por un pasadizo oscuro y estrecho. Tras caminar un buen tramo, llegas al final del pasadizo y te encuentras frente a una imponente puerta antigua.
        </p>
        <div class="botones-centro">
            <button onclick="avanzarPantalla()">Entrar a la sala</button>
        </div>
    </div>


   <!-- Pantalla de las Tres Puertas -->
    <div id="pantalla-tres-puertas" class="pantalla">
        <h2>El Enigma de las Tres Puertas</h2>
        <p>De repente, escuchas una voz que te dice: "En tu vida has recorrido caminos que definieron quién eres..."</p>
        <div id="contenedor-puertas">
            <div class="puertas">
                <!-- Puerta de enfermería -->
                <div class="puerta" id="puerta-enfermeria" onclick="interactuarPuerta('enfermeria')"></div>
                <!-- Puerta de natación -->
                <div class="puerta" id="puerta-natacion" onclick="interactuarPuerta('natacion')"></div>
                <!-- Puerta de música -->
                <div class="puerta" id="puerta-musica" onclick="interactuarPuerta('musica')"></div>
            </div>
        </div>
    </div>

    
    <!-- Popup de interacción con las puertas -->
    <div id="popup-puerta" class="popup">
        <span class="cerrar-popup" onclick="cerrarPopupPuerta()">&times;</span>
        <div class="popup-contenido">
            <p id="mensaje-puerta"></p>
            <button id="boton-accion-puerta" onclick="accionPuerta()">Cerrar</button>
        </div>
    </div>
    
    
        <!-- Pantalla del Minijuego: El Camino Roto -->
        <div id="pantalla-camino-roto" class="pantalla">
            <h2>El Camino Incompleto</h2>
            <p>"Este camino comenzó, pero quedó incompleto. Une las piezas para reconstruirlo y avanzar."</p>
            <div id="area-camino">
                <!-- Aquí irán los fragmentos del camino para arrastrar -->
                <!-- Por simplicidad, usaremos divs representando los fragmentos -->
                <div class="fragmento" id="fragmento-1" draggable="true" ondragstart="drag(event)">1</div>
                <div class="fragmento" id="fragmento-2" draggable="true" ondragstart="drag(event)">2</div>
                <div class="fragmento" id="fragmento-3" draggable="true" ondragstart="drag(event)">3</div>
                <div class="fragmento" id="fragmento-4" draggable="true" ondragstart="drag(event)">4</div>
                <div class="fragmento" id="fragmento-5" draggable="true" ondragstart="drag(event)">5</div>
            </div>
            <div id="camino-destino" ondrop="drop(event)" ondragover="allowDrop(event)">
                <!-- Área donde se ensamblará el camino -->
            </div>
            <div class="botones-centro">
                <button id="boton-intentar-abrir-puerta" onclick="intentarAbrirPuerta()" disabled>Intentar abrir la puerta</button>
            </div>
        </div>
    
        <!-- Pantalla de la Puerta Bloqueada con el Baúl -->
        <div id="pantalla-puerta-bloqueada" class="pantalla">
            <h2>La Puerta Bloqueada</h2>
            <p>"La puerta está bloqueada. Necesitarás una llave para abrirla."</p>
            <div class="botones-centro">
                <button onclick="mostrarBaul()">Busca la llave</button>
            </div>
        </div>

        <!-- Pantalla del Minijuego: Saltos de Plataformas -->
        <div id="pantalla-juego-saltos" class="pantalla">
            <h2>Saltos de Plataformas</h2>
            <p>¡Intenta llegar a la puerta saltando sobre las plataformas! Usa las flechas para moverte y la barra espaciadora para saltar.</p>
            <canvas id="saltosCanvas" width="600" height="400"></canvas>
            <div class="botones-centro">
                <button id="continuar-saltos-btn" onclick="finalizarJuegoSaltos()" disabled>Continuar hacia la puerta</button>
            </div>
        </div>

    
        <!-- Pantalla del Baúl con la Contraseña -->
        <div id="pantalla-baul" class="pantalla">
            <h2>El Baúl Misterioso</h2>
            <p>"El camino está casi completo. Para encontrar la llave que lo abre, primero debes buscar en el mundo real. Abre tu regalo y descubrirás la respuesta."</p>
            <div class="botones-centro">
                <button onclick="abrirRegalo()">Abrir el regalo</button>
            </div>
            <div id="area-contraseña" style="display: none;">
                <p>"Cuando tengas el regalo en tus manos, escribe la palabra que lo define."</p>
                <input type="text" id="input-contraseña" placeholder="Escribe la contraseña">
                <button onclick="comprobarContraseña()">Desbloquear</button>
            </div>
        </div>
    
        <!-- Popup de Error de Contraseña -->
        <div id="popup-error-contraseña" class="popup">
            <div class="popup-contenido">
                <span class="cerrar-popup" onclick="cerrarPopupErrorContraseña()">&times;</span>
                <p>Parece que todavía no tienes la llave correcta. Busca de nuevo en el regalo.</p>
            </div>
        </div>
    
        <!-- Pantalla Final tras abrir la puerta de la música -->
        <div id="pantalla-final-puerta-abierta" class="pantalla">
            <h2>El Camino Completado</h2>
            <p>"Este era el paso que faltaba para completar el camino hacia la música. Ahora puedes retomarlo y dejarlo florecer."</p>
            <p>"Nunca es tarde para caminar de nuevo por un sendero que te ha estado esperando."</p>
        </div>    

        <!-- Popup de "¿Volver a intentar?" -->
    <div id="popup-volver-intentar" class="popup">
        <div class="popup-contenido">
            <p>¿Volver a intentar?</p>
            <button onclick="reiniciarAhorcado()" class="boton-ok">OK</button>
        </div>
    </div>


    <!-- Pantalla Final - Revelación del Regalo -->
    <div id="pantalla-final" class="pantalla">
        <h2>El Último Susurro</h2>
        <p>Has llegado al final de tu viaje y descubierto los mensajes ocultos. Abre el regalo que tienes frente a ti, y este planeta te revelará su secreto final.</p>
        <button onclick="mostrarUltimaFrase()">Ya he abierto el regalo</button>
        <button onclick="retrocederPantalla()">Volver atrás</button>
    </div>

    <!-- Pantalla de Revelación Final -->
    <div id="pantalla-final-revelacion" class="pantalla">
        <h2>Este es tu regalo</h2>
        <p>Ahora que has descubierto el regalo, el último susurro del planeta te habla directamente: “¿Y qué instrumento cojo? ¿El piano? A mí me gusta.”</p>
        <p>Sari, este piano es solo para ti… para que descubras las melodías que has llevado dentro todo este tiempo.</p>
    </div>

    <!-- Popup para el botón de la gallina -->
    <div id="popup-cagueta" class="popup">
        <div class="popup-contenido">
            <span class="cerrar-popup" onclick="cerrarPopup()">&times;</span>
            <p>¿En serio? ¿Eres una cagueta? Sabes que no vas a poder avanzar hasta que no ganes...</p>
        </div>
    </div>

    <!-- Popup de derrota en Tic Tac Toe -->
    <div id="popup-perdida" class="popup">
        <div class="popup-contenido">
            <span class="cerrar-popup" onclick="cerrarPopup()">&times;</span>
            <p>JAJAJA, ¡¡HAS PERDIDO!! HASTA QUE NO GANES NO PODRÁS CONTINUAR 😈</p>
        </div>
    </div>

    <!-- Popup de victoria en Tic Tac Toe -->
    <div id="popup-victoria" class="popup">
        <div class="popup-contenido">
            <span class="cerrar-popup" onclick="cerrarPopup()">&times;</span>
            <p>Mierda, me has ganado... Nos veremos en el infierno... 🖕🏻🖕🏻</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>